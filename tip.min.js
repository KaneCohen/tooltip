/**
 * Tiny simplistic tooltip plugin for jQuery
 * version 0.1.1
 * Kane Cohen [KaneCohen@gmail.com] | https://github.com/KaneCohen
 * @preserve
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function i(t){this.init(t)}t.fn.tip=function(e){var o=arguments,n=t.extend(!0,{},e),l=t(n.parent||document).data("tip");return n.selector=this.selector||".tip",l?l.trigger.apply(l,o):new i(n),this},i.prototype={o:{},d:{parent:null,showTime:200,hideTime:1e3,arrowSize:5,follow:!1,position:"auto",align:"right",aside:!1,selector:".tip",tpl:'<div id="tip" style="visibility: hidden;"><div class="content"></div><i class="arrow"></i></div>'},v:{},dv:{timer:null,enter:null,active:!1,follow:{x:!1,y:!1}},init:function(i){this.o=t.extend({},this.d,i),this.v=t.extend({},this.dv),this.o.parent=i.parent||document,this.initEvents(),t(this.o.parent).data("tip",this)},initEvents:function(){var i=this,e=function(e){var o=t(this);!o.data("tip")&&o.attr("title")&&o.attr("data-tip",t.trim(o.attr("title"))),o.removeAttr("title"),t("#tip").remove(),clearTimeout(i.v.timer),clearTimeout(i.v.enter),i.v.active?i.show(e,o):i.v.timer=setTimeout(function(){i.v.active=!0,i.show(e,o)},i.o.showTime)},o=function(){t(i.o.parent).off("mousemove.tip"),t("#tip").remove(),clearTimeout(i.v.timer),clearTimeout(i.v.enter),i.v.enter=setTimeout(function(){i.v.active=!1},i.o.hideTime)};t(this.o.parent).on("mouseover.tip touchstart.tip",this.o.selector,e),t(this.o.parent).on("mouseout.tip mousedown.tip touchend.tip touchcancel.tip",i.o.selector+", #tip",o)},show:function(i,e){var o=this,n=this.o,l=this.v,r=t.trim(e.data("tip")),a=e.data("tipFollow")||n.follow,s=e.data("tipAlign")||n.align,p=e.data("tipAside")||n.aside,h=e.data("tipPosition")||n.position;if(a&&(l.follow.x=a.indexOf("x")>=0,l.follow.y=a.indexOf("y")>=0),null!==r&&0!==r.length){var f=t(o.o.tpl),d=f.find(".arrow"),c={left:t(window).scrollLeft(),top:t(window).scrollTop(),width:t(window).width(),height:t(window).height()},u=e[0].getBoundingClientRect();f.find(".content").html(r),t("body").append(f);var v=f[0].getBoundingClientRect(),w=v.width,m=v.height,g=c.width-w,y=c.height-m;f.css({width:w,height:m});var x={left:"right"==s?u.left+u.width/2-9:u.left+u.width/2-v.width/2,top:u.top-m-n.arrowSize};p||"left"==h||"right"==h?(h="auto"==h?"right":h,x.top=u.top+u.height/2-m/2+2,x.left=u.left-w-n.arrowSize,x.left>g?(x.left=u.right+n.arrowSize,h="left"):(x.left<0||"right"==h)&&(x.left=u.right+n.arrowSize,h="right")):("center"==s&&d.css({left:v.width/2-n.arrowSize}),x.left>g?(d.css({left:x.left-g+n.arrowSize}),x.left=g):x.left<0&&(x.left=0),x.top>y?x.top=y:(x.top<0||"bottom"==h)&&(x.top=u.bottom+n.arrowSize,h="bottom")),h="auto"==h?"top":h,f.addClass(h),a&&(x=this.calculatePos(h,x,v,c,s,i),t(this.o.parent).on("mousemove.tip touchmove.tip",function(t){x=o.calculatePos(h,x,v,c,s,t),f[0].style.left=x.left+"px",f[0].style.top=x.top+"px"})),f.css({left:x.left,top:x.top,visibility:"visible"})}},calculatePos:function(t,i,e,o,n,l){return"top"==t||"bottom"==t?(this.v.follow.x&&(i.left="right"==n?l.pageX-o.left-9:l.pageX-o.left-e.width/2),this.v.follow.y&&(i.top=l.pageY-e.height-o.top-9,i.top+=i.top<0?2*e.height:0)):(this.v.follow.x&&(i.left=l.pageX-o.left+9),this.v.follow.y&&(i.top=l.pageY-e.height/2-o.top+2)),i},destroy:function(){t(this.o.parent).off(".tip"),t("#tip").remove()},trigger:function(t){var i=Array.prototype.slice.call(arguments,1);return this[t]&&this[t].apply(this,i)===!1?!1:!0}}});