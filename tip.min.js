/**
 * Tiny simplistic tooltip plugin for jQuery
 * version 0.1.0
 * Kane Cohen [KaneCohen@gmail.com] | https://github.com/KaneCohen
 * @preserve
 */
!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function($){function Tip(o){this.init(o)}$.fn.tip=function(options){var args=arguments,o=$.extend(!0,{},options),tip=$(o.parent||document).data("tip");return o.selector=this.selector||".tip",tip?tip.trigger.apply(tip,args):new Tip(o),this},Tip.prototype={o:{},d:{parent:null,showTime:200,hideTime:1e3,arrowSize:5,follow:!1,position:"auto",align:"right",aside:!1,selector:".tip",tpl:'<div id="tip" style="visibility: hidden;"><div class="content"></div><i class="arrow"></i></div>'},v:{},dv:{timer:null,enter:null,active:!1,follow:{x:!1,y:!1}},init:function(o){this.o=$.extend({},this.d,o),this.v=$.extend({},this.dv),this.o.parent=o.parent||document,this.initEvents(),$(this.o.parent).data("tip",this)},initEvents:function(){var self=this;$(this.o.parent).on("mouseover.tip",this.o.selector,function(e){var el=$(this);!el.data("tip")&&el.attr("title")&&el.attr("data-tip",$.trim(el.attr("title"))),el.removeAttr("title"),$("#tip").remove(),clearTimeout(self.v.timer),clearTimeout(self.v.enter),self.v.active?self.show(e,el):self.v.timer=setTimeout(function(){self.v.active=!0,self.show(e,el)},self.o.showTime)}),$(this.o.parent).on("mouseout.tip mousedown.tip",self.o.selector+", #tip",function(){$(self.o.parent).off("mousemove.tip"),$("#tip").remove(),clearTimeout(self.v.timer),clearTimeout(self.v.enter),self.v.enter=setTimeout(function(){self.v.active=!1},self.o.hideTime)})},show:function(e,el){var self=this,o=this.o,v=this.v,tip=$.trim(el.data("tip")),follow=el.data("tipFollow")||o.follow,align=el.data("tipAlign")||o.align,aside=el.data("tipAside")||o.aside,position=el.data("tipPosition")||o.position;if(follow&&(v.follow.x=follow.indexOf("x")>=0,v.follow.y=follow.indexOf("y")>=0),null!==tip&&0!==tip.length){var template=$(self.o.tpl),arrow=template.find(".arrow"),win={left:$(window).scrollLeft(),top:$(window).scrollTop(),width:$(window).width(),height:$(window).height()},b=el[0].getBoundingClientRect();template.find(".content").html(tip),$("body").append(template);var tb=template[0].getBoundingClientRect(),w=tb.width,h=tb.height,maxX=win.width-w,maxY=win.height-h;template.css({width:w,height:h});var p={left:"right"==align?b.left+b.width/2-9:b.left+b.width/2-tb.width/2,top:b.top-h-o.arrowSize};aside||"left"==position||"right"==position?(position="left"!=position||"right"!=position?"right":position,p.top=b.top+b.height/2-h/2+2,p.left=b.left-w-o.arrowSize,p.left>maxX?(p.left=b.right+o.arrowSize,position="left"):(p.left<0||"right"==position)&&(p.left=b.right+o.arrowSize)):("center"==align&&arrow.css({left:tb.width/2-o.arrowSize}),p.left>maxX?(arrow.css({left:p.left-maxX+o.arrowSize}),p.left=maxX):p.left<0&&(p.left=0),p.top>maxY?p.top=maxY:(p.top<0||"bottom"==position)&&(p.top=b.bottom+o.arrowSize,position="bottom")),position="auto"==position?"top":position,template.addClass(position),follow&&(p=this.calculatePos(position,p,tb,win,align,e),$(this.o.parent).on("mousemove.tip",function(e){p=self.calculatePos(position,p,tb,win,align,e),template[0].style.left=p.left+"px",template[0].style.top=p.top+"px"})),template.css({left:p.left,top:p.top,visibility:"visible"})}},calculatePos:function(position,p,tb,win,align,e){return"top"==position||"bottom"==position?(this.v.follow.x&&(p.left="right"==align?e.pageX-win.left-9:e.pageX-win.left-tb.width/2),this.v.follow.y&&(p.top=e.pageY-h-win.top-9,p.top+=p.top<0?2*h:0)):(v.follow.x&&(p.left=e.pageX-win.left+9),v.follow.y&&(p.top=e.pageY-h/2-win.top+2)),p},destroy:function(){$(this.o.parent).off(".tip"),$("#tip").remove()},trigger:function(name){var args=Array.prototype.slice.call(arguments,1);return this[name]&&this[name].apply(this,args)===!1?!1:!0}}});